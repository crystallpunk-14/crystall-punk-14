- type: entity
  parent: BaseItem
  id: CP14ModularGripBase
  abstract: true
  categories: [ ForkFiltered ]
  components:
  - type: Item
    storedRotation: 45
  - type: ExaminableDamage
    messages: CP14WeaponMessages
  - type: Damageable
    damageContainer: Inorganic
  - type: CP14MeleeSelfDamage
    damageToSelf:
      types:
        Blunt: 0.5 # 100 hits
  - type: MeleeWeapon
    angle: 45
    attackRate: 1
    wideAnimationRotation: 135
    wideAnimation: CP14WeaponArcSlash
    damage:
      types:
        Blunt: 0
    soundHit:
      collection: MetalThud
    cPAnimationLength: 0.25
  - type: Clothing
    equipDelay: 0.25
    unequipDelay: 0.25
    quickEquip: false
    breakOnMove: false
  - type: CP14MeleeParriable

- type: entity
  parent: CP14ModularGripBase
  id: CP14ModularGripWooden
  name: wooden grip
  description: A short wooden handle for a weapon or tool. The cheapest and most unstable material.
  components:
  - type: Item
    shape:
    - 0,0,0,0
    storedOffset: 0, -5
  - type: Sprite
    sprite: _CP14/Objects/ModularTools/wooden_grip.rsi
    state: icon
  - type: CP14ModularCraftStartPoint
    startProtoPart: CP14ModularGripWooden
    startSlots:
    - Blade
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 50
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:CP14ModularDisassembleBehavior
      - !type:DoActsBehavior
        acts: ["Destruction"]
  - type: MeleeWeapon
    resetOnHandSelected: false #Fast swap
    range: 1.0 # 1.5 standart
    cPAnimationOffset: -0.75 #-1 standart
    attackRate: 1 # 1 standart
  - type: Clothing
    slots:
    - belt

- type: entity
  parent: CP14ModularGripBase
  id: CP14ModularGripWoodenLong
  name: long wooden grip
  description: long, two-handed wooden handle for heavy weapons or large tools.
  components:
  - type: Item
    shape:
    - 0,0,0,1
    storedOffset: 0, -15
  - type: Sprite
    sprite: _CP14/Objects/ModularTools/wooden_grip_long.rsi
    state: icon
  - type: CP14ModularCraftStartPoint
    startProtoPart: CP14ModularGripWoodenLong
    startSlots:
    - Blade
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 50
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:CP14ModularDisassembleBehavior
      - !type:DoActsBehavior
        acts: ["Destruction"]
  - type: MeleeWeapon
    resetOnHandSelected: true
    range: 1.5 # 1.5 standart
    attackRate: 0.7 # 1 standart
    cPAnimationOffset: -1
  - type: Wieldable
  - type: IncreaseDamageOnWield
    damage:
      types:
        Blunt: 0
  - type: Clothing
    slots:
    - neck

- type: entity
  parent: CP14ModularGripWooden
  id: CP14ModularGripIron
  name: iron grip
  description: A short iron handle for a weapon or tool.
  components:
  - type: Sprite
    sprite: _CP14/Objects/ModularTools/iron_grip.rsi
  - type: CP14ModularCraftStartPoint
    startProtoPart: CP14ModularGripIron
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 100 #x2 durability
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:CP14ModularDisassembleBehavior
      - !type:DoActsBehavior
        acts: ["Destruction"]

- type: entity
  parent: CP14ModularGripWoodenLong
  id: CP14ModularGripIronLong
  name: long iron grip
  description: long, two-handed iron handle for heavy weapons or large tools.
  components:
  - type: Sprite
    sprite: _CP14/Objects/ModularTools/iron_grip_long.rsi
  - type: CP14ModularCraftStartPoint
    startProtoPart: CP14ModularGripIronLong
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 100 #x2 durability
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:CP14ModularDisassembleBehavior
      - !type:DoActsBehavior
        acts: ["Destruction"]