- type: entity
  id: CP14DemiplaneRiftCore
  name: demiplane rift core
  description: Touch to open the door to a new world
  categories: [ ForkFiltered ]
  placement:
    mode: SnapgridCenter
  components:
  - type: Sprite
    noRot: true
    drawdepth: Mobs
    sprite: /Textures/_CP14/Structures/Dungeon/demiplan_rift_core.rsi
    layers:
    - state: connective
      shader: unshaded
  - type: CP14DemiplaneRift
  - type: Clickable
  - type: InteractionOutline
  - type: PointLight
    enabled: true
    color: "#8f42ff"
    energy: 1
    radius: 5

- type: entity
  parent: MarkerBase
  id: CP14DemiplaneEnterPointMarker
  name: demiplane enter point
  categories: [ ForkFiltered ]
  components:
  - type: Sprite
    layers:
    - state: green
    - sprite: /Textures/_CP14/Structures/Dungeon/demiplan_rift_core.rsi
      state: core1
  - type: CP14DemiplaneEnterPoint

- type: entity
  id: CP14DemiplaneRiftAwaiting
  parent: BasePortal
  categories: [ ForkFiltered ]
  name: unstable demiplane rift
  description: A gap in space that allows you to travel between worlds. It is still unstable, and entering it is hazardous to your health.
  components:
  - type: Sprite
    noRot: true
    drawdepth: Effects
    sprite: /Textures/_CP14/Structures/Dungeon/demiplan_rift.rsi
    layers:
    - state: pulse
      shader: unshaded
  - type: PointLight
    enabled: true
    color: "#8f42ff"
    energy: 1
    radius: 5
  - type: SingularityDistortion
    falloffPower: 1.5
    intensity: 50
  - type: LightBehaviour
    behaviours:
      - !type:PulseBehaviour
        interpolate: Cubic
        maxDuration: 2
        startValue: 0.1
        endValue: 1.0
        property: Energy
        isLooped: true
        enabled: true
  - type: AmbientSound
    volume: -3
    range: 7
    sound:
      path: /Audio/Ambience/anomaly_scary.ogg
  - type: Portal
    maxRandomRadius: 10
  - type: ConditionalSpawner
    prototypes:
    - CP14SkyLightningPurple

- type: entity
  id: CP14DemiplaneRiftPortal
  parent: BasePortal
  categories: [ ForkFiltered ]
  name: demiplane rift
  description: A gap in space that allows you to travel between worlds.
  components:
  - type: Sprite
    noRot: true
    drawdepth: Effects
    sprite: /Textures/_CP14/Structures/Dungeon/demiplan_rift.rsi
    layers:
    - state: anom
      shader: unshaded
  - type: PointLight
    enabled: true
    color: "#8f42ff"
    energy: 1
    radius: 5
  - type: AmbientSound
    volume: -3
    range: 7
    sound:
      path: /Audio/Ambience/Objects/gravity_gen_hum.ogg
  - type: Portal
    canTeleportToOtherMaps: true
  - type: EmitSoundOnSpawn
    sound: 
      path: /Audio/_CP14/Effects/ritual_end.ogg
      params:
        variation: 0.3

- type: entity
  id: CP14TempPortalToCity
  parent: BasePortal
  categories: [ ForkFiltered ]
  name: temporary rift
  description: A temporary portal leading directly to the city. You have about a minute to use it before it closes.
  components:
  - type: Sprite
    noRot: true
    drawdepth: Effects
    sprite: /Textures/_CP14/Structures/Dungeon/demiplan_rift.rsi
    layers:
    - state: pulse
      shader: unshaded
      color: "#a1d1ff"
  - type: PointLight
    enabled: true
    color: "#a590de"
    energy: 1
    radius: 5
  - type: AmbientSound
    volume: -3
    range: 7
    sound:
      path: /Audio/Ambience/Objects/gravity_gen_hum.ogg
  - type: Portal
    canTeleportToOtherMaps: true
  - type: EmitSoundOnSpawn
    sound: 
      path: /Audio/_CP14/Effects/ritual_end.ogg
      params:
        variation: 0.125
  - type: TimedDespawn
    lifetime: 80
  - type: ConditionalSpawner
    prototypes:
    - CP14SkyLightningPurple
  