- type: entity
  parent: CP14SimpleMobBase
  id: CP14MobMonsterCackle
  name: cackle
  description: A monster that hunts for blood as a source of sustenance.
  categories: [ ForkFiltered ]
  components:
  - type: HTN
    rootTask:
      task: SimpleRangedHostileCompound
    blackboard:
      NavSmash: !type:Bool
        true
      VisionRadius: !type:Single
        16
      AggroVisionRadius: !type:Single
        6
  - type: Sprite
    drawdepth: Mobs
    sprite: _CP14/Mobs/Monster/cackle.rsi
    layers:
      - map: [ "enum.DamageStateVisualLayers.Base" ]
        state: live
      - map: [ "enum.DamageStateVisualLayers.BaseUnshaded" ] #used cause i dont know if there are any more applicable ones no it is not meant to be unshaded
        state: live_spikes
  - type: Physics
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 0.35
        density: 200 #rotund
        mask:
        - MobMask
        layer:
        - MobLayer
  - type: Butcherable
    spawned:
    - id: CP14FoodCabbageSlice
      amount: 4
    - id: CP14BloodFlower
      amount: 2
    - id: CP14FoodCabbage
      amount: 1
      prob: 0.6
  - type: CombatMode
  - type: MeleeWeapon
    angle: 0
    animation: WeaponArcBite
    damage:
      types:
        Piercing: 1
        Structural: 3
  - type: Body
    prototype: Animal
  - type: Damageable
    damageContainer: CP14Biological
    damageModifierSet: CP14Cackle
  - type: MobThresholds
    thresholds:
      0: Alive
      45: Dead
  - type: SlowOnDamage
    speedModifierThresholds:
      30: 0.5
  - type: DamageStateVisuals
    states:
      Alive:
        Base: live
        BaseUnshaded: live_spikes
      Dead:
        Base: dead
        BaseUnshaded: dead_spikes
  - type: Stamina
    critThreshold: 75
  - type: SolutionContainerManager
    solutions:
      melee:
        maxVol: 30
  - type: SolutionRegeneration
    solution: melee
    generated:
      reagents:
      - ReagentId: CP14MonsterToxinBleed
        Quantity: 1
  - type: MeleeChemicalInjector
    transferAmount: 1
    solution: melee
  - type: ReplacementAccent
    accent: xeno
  - type: InteractionPopup
    successChance: 0.6
    interactSuccessString: petting-success-generic
    interactFailureString: petting-failure-generic
    interactSuccessSpawn: EffectHearts
    interactSuccessSound:
      path: /Audio/Voice/Diona/diona_rustle2.ogg
  - type: Bloodstream
    bloodMaxVolume: 200
    bloodReagent: CP14BloodFlowerSap
  - type: Tag
    tags:
    - FootstepSound
  - type: PassiveDamage # Slight passive regen. Assuming one damage type, comes out to about 4 damage a minute from base.yml.
    allowedStates:
    - Alive
    damageCap: 45
    damage:
      types:
        Poison: -0.07
      groups:
        Brute: -0.07
        Burn: -0.07
  - type: BasicEntityAmmoProvider
    proto: CP14SpikeCackleSpread
    capacity: 2
    count: 2
  - type: RechargeBasicEntityAmmo
    showExamineText: false
    rechargeSound: null
    rechargeCooldown: 4
  - type: Gun
    fireRate: 1
    useKey: false
    showExamineText: false
    selectedMode: FullAuto
    availableModes:
    - FullAuto
    soundGunshot:
      path: /Audio/Weapons/Guns/Gunshots/water_spray.ogg
  - type: NpcFactionMember
    factions:
    - CP14Monster
