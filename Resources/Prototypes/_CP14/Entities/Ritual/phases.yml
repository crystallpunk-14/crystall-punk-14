- type: entity
  id: CP14BaseRitualPhase
  abstract: true
  components:
  - type: CP14MagicRitualPhase
  - type: Tag
    tags:
      - HideContextMenu

- type: entity
  parent: CP14FoodCucumber
  id: RitualCucumber
  name: ritual cucumber
  components:
  - type: CP14MagicRitual
    startPhase: CP14RitualPhaseStartpoint

- type: entity
  parent: CP14BaseRitualPhase
  id: CP14RitualPhaseStartpoint
  components:
  - type: PointLight
    color: "#FFFF00"
  - type: CP14RitualTriggerVoice
    failAttempts: 3
    failedPhase: CP14RitualPhaseFailed
    triggers:
    - targetPhase: CP14RitualPhaseSecond
      message: "Singulo"
      uniqueSpeakers: 2
  - type: CP14MagicRitualPhase
    edges:
    - target: CP14RitualPhaseFailed
    - target: CP14RitualPhaseSecond
      requirements:
      - !type:RequiredResource
        effect: CP14ImpactEffectShadowGrab
        checkRange: 3
        requiredEntities:
          CP14FoodCucumber: 3
        requiredStack:
          CP14WoodenPlanks: 2

      actions: 
      - !type:ConsumeResource
        checkRange: 3
        requiredEntities:
          CP14FoodCucumber: 2
        requiredStack:
          CP14WoodenPlanks: 1
      - !type:SpawnEntity
        proto: CP14BarrelBlood

- type: entity
  parent: CP14BaseRitualPhase
  id: CP14RitualPhaseSecond
  components:
  - type: PointLight
    color: "#FF00FF"
  - type: EmitSoundOnSpawn
    sound: 
      path: /Audio/Effects/tesla_consume.ogg
      params:
        variation: 0.3
  - type: CP14RitualTriggerTimer
    nextPhase: CP14RitualPhaseStartpoint
    time:
      min: 5
      max: 10
  - type: CP14MagicRitualPhase
    edges:
    - target: CP14RitualPhaseStartpoint # To start

- type: entity
  parent: CP14BaseRitualPhase
  id: CP14RitualPhaseFailed
  components:
  - type: PointLight
    color: "#FF0000"
  - type: EmitSoundOnSpawn
    sound: 
      path: /Audio/Effects/tesla_consume.ogg
      params:
        variation: 0.6
  - type: CP14RitualTriggerTimer
    nextPhase: CP14RitualPhaseStartpoint
    time:
      min: 5
      max: 10
  - type: CP14MagicRitualPhase
    edges:
    - target: CP14RitualPhaseStartpoint # To start