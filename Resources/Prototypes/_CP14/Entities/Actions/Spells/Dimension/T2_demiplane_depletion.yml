- type: entity
  id: CP14ActionSpellDemiplaneDepletion
  name: Demiplan depletion
  description: you deplete the demiplane crystal by shutting it down.
  components:
  - type: Sprite
    sprite: _CP14/Actions/Spells/dimension.rsi
    state: rift_arrow
  - type: CP14MagicEffectManaCost
    manaCost: 1
  - type: CP14MagicEffect
    effects:
    - !type:CP14SpellSpawnEntityOnTarget
      spawns:
      - CP14ImpactEffectMagicSplitting
    - !type:CP14SpellApplyEntityEffect
      effects:
      - !type:CP14ManaChange
        manaDelta: -15
        safe: true
  - type: CP14MagicEffectCastingVisual
    proto: CP14RuneDemiplaneDepletion
  - type: EntityTargetAction
    whitelist:
      components:
      - CP14DemiplaneNavigationMap
    itemIconStyle: BigAction
    interactOnMiss: false
    range: 1.5
    sound: !type:SoundPathSpecifier
      path: /Audio/Magic/rumble.ogg
    icon:
      sprite: _CP14/Actions/Spells/dimension.rsi
      state: demi_arrow
    event: !type:CP14ToggleableEntityTargetActionEvent
      cooldown: 15
      castTime: 100
      breakOnMove: true

- type: entity
  id: CP14RuneDemiplaneDepletion
  parent: CP14BaseMagicRune
  categories: [ HideSpawnMenu ]
  save: false
  components:
  - type: PointLight
    color: "#5e427e"
  - type: Sprite
    layers:
    - state: sun
      color: "#5e427e"
      shader: unshaded
    - state: double_outer
      color: "#5096d4"
      shader: unshaded