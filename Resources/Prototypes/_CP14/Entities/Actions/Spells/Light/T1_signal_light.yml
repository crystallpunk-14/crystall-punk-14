- type: entity
  id: CP14ActionSpellSignalLightBase
  abstract: true
  components:
  - type: Sprite
    sprite: _CP14/Effects/Magic/spells_icons.rsi
  - type: CP14MagicEffectManaCost
    manaCost: 10
  - type: CP14MagicEffect
    magicType: Light
  - type: CP14MagicEffectSomaticAspect
  - type: InstantAction
    itemIconStyle: BigAction
    sound: !type:SoundPathSpecifier
      path: /Audio/Magic/rumble.ogg
    event: !type:CP14DelayedInstantActionEvent
      cooldown: 10
      castDelay: 0.5
      breakOnMove: false

# RED

- type: entity
  id: cP14ActionSpellSignalLightRed
  parent: CP14ActionSpellSignalLightBase
  name: Red signal Light
  description: You launch a hovering ball of light, briefly emitting a bright glow of red. This glow is able to penetrate the real world even from the demiplane. 
  components:
  - type: Sprite
    state: signal_light_red
  - type: CP14MagicEffect
    effects:
    - !type:CP14SpellSpawnEntityOnTarget
      spawns:
      - CP14SignalLightRed
  - type: CP14MagicEffectCastingVisual
    proto: CP14RuneSignalLightRed
  - type: InstantAction
    icon:
      sprite: _CP14/Effects/Magic/spells_icons.rsi
      state: signal_light_red

- type: entity
  id: CP14RuneSignalLightRed
  parent: CP14BaseMagicRune
  categories: [ HideSpawnMenu ]
  components:
  - type: PointLight
    color: "#db1616"
  - type: Sprite
    layers:
    - state: sun
      color: "#db1616"
      shader: unshaded

# Signals

- type: entity
  id: CP14SignalLightBase
  abstract: true
  categories: [ ForkFiltered ]
  name: signal light
  components:
  - type: TimedDespawn
    lifetime: 12
  - type: Sprite
    sprite: _CP14/Effects/Magic/sphere_of_light.rsi
    noRot: true
    layers:
    - state: icon
      shader: unshaded
  - type: PointLight
    radius: 20.0
    energy: 1
    netsync: false
    mask: /Textures/_CP14/Effects/LightMasks/lighthouse_cone.png
    #TODO ambient sound

- type: entity
  id: CP14SignalLightRed
  parent: CP14SignalLightBase
  suffix: Red
  components:
  - type: Sprite
    color: "#db1616"
  - type: PointLight
    color: "#db1616"
  - type: LightBehaviour
    behaviours:
    - !type:PulseBehaviour
      interpolate: Cubic
      maxDuration: 2
      minValue: 1.0
      maxValue: 60.0
      property: Energy
      isLooped: true
      enabled: true
  - type: RotatingLight
    speed: 80
  - type: CP14SpawnOutOfDemiplane
    proto: CP14SignalLightRed

- type: entity
  id: CP14SignalLightYellow
  parent: CP14SignalLightBase
  suffix: Yellow
  components:
  - type: Sprite
    color: "#ebc942"
  - type: PointLight
    color: "#ebc942"
  - type: LightBehaviour
    behaviours:
    - !type:PulseBehaviour
      interpolate: Cubic
      maxDuration: 3
      minValue: 1.0
      maxValue: 60.0
      property: Energy
      isLooped: true
      enabled: true
  - type: RotatingLight
    speed: 30
  - type: CP14SpawnOutOfDemiplane
    proto: CP14SignalLightYellow

- type: entity
  id: CP14SignalLightBlue
  parent: CP14SignalLightBase
  suffix: Blue
  components:
  - type: Sprite
    color: "#42aaeb"
  - type: PointLight
    color: "#42aaeb"
  - type: LightBehaviour
    behaviours:
    - !type:PulseBehaviour
      interpolate: Cubic
      maxDuration: 4
      minValue: 1.0
      maxValue: 60.0
      property: Energy
      isLooped: true
      enabled: true
  - type: RotatingLight
    speed: 50
  - type: CP14SpawnOutOfDemiplane
    proto: CP14SignalLightBlue
